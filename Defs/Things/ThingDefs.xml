<?xml version="1.0" encoding="utf-8"?>

<Defs>

<ThingDef ParentName="BuildingBase">
    <defName>ChComfyClimateNode</defName>
    <label>comfort node</label>
    <description>A compact climate stabilizer. It needs no power and gently keeps its room near the configured temperature.</description>

    <thingClass>Building</thingClass>
    <category>Building</category>
    <tickerType>Rare</tickerType>

    <!-- floor object -->
    <passability>PassThroughOnly</passability>
    <fillPercent>0.05</fillPercent>
    <rotatable>false</rotatable>

    <!-- IMPORTANT: don't put this in Architect menu -->
    <!-- (No designationCategory / thingCategories on purpose) -->

    <!-- Placeholder graphic: reuse heater until you make art -->
    <graphicData>
      <texPath>Things/ChComfy_ComfyNode</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <drawSize>(1.25,1.25)</drawSize>
    </graphicData>

    <statBases>
      <MaxHitPoints>120</MaxHitPoints>
      <Flammability>0.5</Flammability>
      <Mass>4</Mass>
    </statBases>

    <comps>
      <li Class="ChTraits.Comps.CompProperties_ChComfyClimateNode">
        <defaultTargetTemperature>21.1</defaultTargetTemperature>
        <deadbandC>0.25</deadbandC>
        <requireIndoors>true</requireIndoors>
      </li>
      <li Class="ChTraits.Comps.CompProperties_ComfyGlow">
        <glowRadius>3</glowRadius>
        <glowColor>(255,255,255)</glowColor>
      </li>
    </comps>
  </ThingDef>


  <ThingDef ParentName="BuildingBase">
    <defName>ChTeslaCoil</defName>
    <label>tesla coil</label>
    <description>A crackling coil that feeds power into the grid and lashes out at nearby hostiles.</description>

    <thingClass>Building</thingClass>
    <drawerType>MapMeshAndRealTime</drawerType>

    <graphicData>
      <!-- Placeholder: swap to your real art later -->
      <texPath>Things/ChTesla_TeslaCoil</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <drawSize>(1.5,1.5)</drawSize>
    </graphicData>

    <altitudeLayer>Building</altitudeLayer>
    <passability>Impassable</passability>
    <fillPercent>1.0</fillPercent>
    <pathCost>10</pathCost>
    <rotatable>true</rotatable>

    <statBases>
      <MaxHitPoints>250</MaxHitPoints>
      <Flammability>0.6</Flammability>
      <Beauty>-5</Beauty>
    </statBases>

    <tickerType>Normal</tickerType>
    <size>(1,1)</size>

    <!-- deploy-only: keep it out of Architect -->
    <building>
      <destroySound>BuildingDestroyed_Metal_Small</destroySound>
    </building>

    <comps>
      <!-- Power: negative consumption = generation; transmitsPower makes it hook to conduits -->
      <li Class="CompProperties_Power">
        <compClass>CompPowerPlant</compClass>
        <basePowerConsumption>-2000</basePowerConsumption>
        <transmitsPower>true</transmitsPower>
      </li>

      <!-- Optional: lets EMP stun it like other electronics -->
      <li Class="CompProperties_Stunnable">
        <useLargeEMPEffecter>true</useLargeEMPEffecter>
        <affectedDamageDefs>
          <li>EMP</li>
        </affectedDamageDefs>
      </li>

      <!-- Your proximity zap logic -->
      <li Class="ChTraits.Comps.CompProperties_ChTeslaZap">
        <radius>6</radius>
        <cooldownTicks>180</cooldownTicks>
        <stunTicks>120</stunTicks>
        <!-- -1 means “match TrapSpike if possible, else fallback in code” -->
        <damageAmount>45</damageAmount>
        <armorPenetration>0.15</armorPenetration>
        <requirePower>false</requirePower>
      </li>
    </comps>

    <terrainAffordanceNeeded>Light</terrainAffordanceNeeded>

    <!-- Keep it from being a normal-build thing (deploy-only) -->
    <neverMultiSelect>true</neverMultiSelect>
  </ThingDef>

</Defs>
